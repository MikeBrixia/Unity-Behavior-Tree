name: Geneate Docfx documentation

on:
    push:
        branches: ["main"]

    workflow_dispatch:

jobs:
    generate-docs:
        runs-on: ubuntu-latest
        steps:
        # Install dotnet
         - name: Checkout
           uses: actions/checkout@v4
         - name: Compile C# code
           uses: actions/setup-dotnet@v3
           with:
            dotnet-version: 7.x
        # Install and intialize docfx
         - name: Install docfx
           run: dotnet tool install -g docfx
         - name: Check for updates
           run: dotnet tool update -g docfx
         - name: init docfx --quiet
           run: docfx init
        # generate API documentation
         - name: Generated docfx documentation
           run: docfx docfx.json
           continue-on-error: false

name: Geneate Docfx documentation

on:
    push:
        branches: ["main"]

    workflow_dispatch:

jobs:
    generate-docs:
        runs-on: ubuntu-latest
        steps:
         - name: Checkout
           uses: actions/checkout@v4
         - name: Compile C# code
           uses: actions/setup-dotnet@v3
           with:
            dotnet-version: 7.x
        # Install docfx
         - name: Install docfx
           run: dotnet tool install -g docfx
         - name: Install dependecies
           run: dotnet restore
        # generate API documentation
         - name: "Init docfx"
           run: docfx init --quiet
         - name: Generated docfx documentation
           run: docfx docfx_project/docfx.json